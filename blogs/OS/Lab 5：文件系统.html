<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.14">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/logo.png"><title>Lab 5：文件系统 | byml's blog</title><meta name="description" content="byml's blog">
    <link rel="preload" href="/assets/style-NmqtuK-L.css" as="style"><link rel="stylesheet" href="/assets/style-NmqtuK-L.css">
    <link rel="modulepreload" href="/assets/app-CqvpY_gu.js"><link rel="modulepreload" href="/assets/Lab 5：文件系统.html-CYXazOcK.js">
    <link rel="prefetch" href="/assets/timeline.html-gun0xohR.js" as="script"><link rel="prefetch" href="/assets/posts.html-DIRnngPE.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-fJlRnGdL.js" as="script"><link rel="prefetch" href="/assets/friendship.html-QfbnSaQO.js" as="script"><link rel="prefetch" href="/assets/about.html-CPZhOJnf.js" as="script"><link rel="prefetch" href="/assets/full-about.html-CdNzG-fy.js" as="script"><link rel="prefetch" href="/assets/1.html-C9NqB2ZD.js" as="script"><link rel="prefetch" href="/assets/1.html-mc34TXFd.js" as="script"><link rel="prefetch" href="/assets/1.html-Dqwdsv01.js" as="script"><link rel="prefetch" href="/assets/1.html-BXAumysi.js" as="script"><link rel="prefetch" href="/assets/1.html-Cmzr5Yeo.js" as="script"><link rel="prefetch" href="/assets/1.html-De_IYiYe.js" as="script"><link rel="prefetch" href="/assets/1.html-BnoUnyey.js" as="script"><link rel="prefetch" href="/assets/1.html-mn926g3r.js" as="script"><link rel="prefetch" href="/assets/1.html-DhOSAWqT.js" as="script"><link rel="prefetch" href="/assets/2.html-DM55X3gj.js" as="script"><link rel="prefetch" href="/assets/3.html-C6stLVpO.js" as="script"><link rel="prefetch" href="/assets/index.html-B4SdQXHf.js" as="script"><link rel="prefetch" href="/assets/Lecture 1 - Introduction.html-D4Sdg9vx.js" as="script"><link rel="prefetch" href="/assets/Lecture 2 - Classification.html-Bi4VZVnK.js" as="script"><link rel="prefetch" href="/assets/Lecture 3 - Loss Function and Optmizatoin.html-BDntLIR8.js" as="script"><link rel="prefetch" href="/assets/Lecture 4 - Backpropagation and Neural Networks.html-D8FRwtWB.js" as="script"><link rel="prefetch" href="/assets/Lecture 5 - Convolutional Neural Network.html-_pfPPJcE.js" as="script"><link rel="prefetch" href="/assets/Lecture 6 - Training Neural Networks.html-x_gyvK5M.js" as="script"><link rel="prefetch" href="/assets/Lecture 7 - Training Neural Networks.html-BcWrTBfQ.js" as="script"><link rel="prefetch" href="/assets/NumPy 学习.html-U5Hl4hH5.js" as="script"><link rel="prefetch" href="/assets/Rasterization.html-mGdU_U5C.js" as="script"><link rel="prefetch" href="/assets/Transform.html-DykOigC5.js" as="script"><link rel="prefetch" href="/assets/GDB 调试 _ VSCode 调试.html-F-Td0I10.js" as="script"><link rel="prefetch" href="/assets/Lab 1：PC，启动.html-CTVJBTwx.js" as="script"><link rel="prefetch" href="/assets/Lab 2：从内核到用户.html-otQ5uXGE.js" as="script"><link rel="prefetch" href="/assets/Lab 3：进程调度.html-CGoFi_1q.js" as="script"><link rel="prefetch" href="/assets/Lab 4：并发控制.html-CmRf5XQa.js" as="script"><link rel="prefetch" href="/assets/Nginx.html-DyBYsbFo.js" as="script"><link rel="prefetch" href="/assets/Ubuntu 24.04.html-DH6zdRZs.js" as="script"><link rel="prefetch" href="/assets/Vim.html-CD7MefxH.js" as="script"><link rel="prefetch" href="/assets/网站折腾实录.html-DeE--kWA.js" as="script"><link rel="prefetch" href="/assets/数字系统设计基础.html-YA9Oe03N.js" as="script"><link rel="prefetch" href="/assets/第 2 章 数字逻辑基础.html-Cka2I4-t.js" as="script"><link rel="prefetch" href="/assets/第 3 章 组合逻辑电路.html-DNkDHkdi.js" as="script"><link rel="prefetch" href="/assets/第 4 章 时序逻辑电路.html-ClqIKuuS.js" as="script"><link rel="prefetch" href="/assets/第 5 章 可编程逻辑器件.html-BcA7rtwU.js" as="script"><link rel="prefetch" href="/assets/第 6 章 运算方法和运算部件.html-1kdxuKp4.js" as="script"><link rel="prefetch" href="/assets/第 7 章 指令系统.html-D-VanV3F.js" as="script"><link rel="prefetch" href="/assets/第 8 章 中央处理器.html-CgREaU3E.js" as="script"><link rel="prefetch" href="/assets/404.html-CIDEjtqJ.js" as="script"><link rel="prefetch" href="/assets/Valine.min-Cg9XxMv-.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-CKTvSCx2.js" as="script"><link rel="prefetch" href="/assets/AboutLayout-uVGTEl2o.js" as="script"><link rel="prefetch" href="/assets/FriendshipLayout-CdBRUoaJ.js" as="script"><link rel="prefetch" href="/assets/FullAboutLayout-B3hJmILm.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-3rwgX-uT.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="byml&#39;s blog"><a href="/" class="site-name can-hide">byml&#39;s blog</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="课程笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 10h7v2h-7z" fill="currentColor"></path><path d="M19 15h7v2h-7z" fill="currentColor"></path><path d="M19 20h7v2h-7z" fill="currentColor"></path><path d="M28 5H4a2.002 2.002 0 0 0-2 2v18a2.002 2.002 0 0 0 2 2h24a2.003 2.003 0 0 0 2-2V7a2.002 2.002 0 0 0-2-2zM4 7h11v18H4zm13 18V7h11l.002 18z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->课程笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="课程笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 10h7v2h-7z" fill="currentColor"></path><path d="M19 15h7v2h-7z" fill="currentColor"></path><path d="M19 20h7v2h-7z" fill="currentColor"></path><path d="M28 5H4a2.002 2.002 0 0 0-2 2v18a2.002 2.002 0 0 0 2 2h24a2.003 2.003 0 0 0 2-2V7a2.002 2.002 0 0 0-2-2zM4 7h11v18H4zm13 18V7h11l.002 18z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->课程笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/categories/数字系统设计基础/1.html" class="link" aria-label="数字系统设计基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->数字系统设计基础<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/CV/1.html" class="link" aria-label="CV"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CV<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/OS/1.html" class="link" aria-label="OS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->OS<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="技术博客"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M4 24h10v2H4z" fill="currentColor"></path><path d="M4 18h10v2H4z" fill="currentColor"></path><path d="M26 14H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zM6 6v6h20V6z" fill="currentColor"></path><path d="M26 28h-6a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zm-6-8v6h6v-6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->技术博客<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="技术博客"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M4 24h10v2H4z" fill="currentColor"></path><path d="M4 18h10v2H4z" fill="currentColor"></path><path d="M26 14H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zM6 6v6h20V6z" fill="currentColor"></path><path d="M26 28h-6a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zm-6-8v6h6v-6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->技术博客<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/categories/Linux/1.html" class="link" aria-label="Linux 学习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Linux 学习<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/friendship.html" class="link" aria-label="友情链接"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M29.25 6.76a6 6 0 0 0-8.5 0l1.42 1.42a4 4 0 1 1 5.67 5.67l-8 8a4 4 0 1 1-5.67-5.66l1.41-1.42l-1.41-1.42l-1.42 1.42a6 6 0 0 0 0 8.5A6 6 0 0 0 17 25a6 6 0 0 0 4.27-1.76l8-8a6 6 0 0 0-.02-8.48z" fill="currentColor"></path><path d="M4.19 24.82a4 4 0 0 1 0-5.67l8-8a4 4 0 0 1 5.67 0A3.94 3.94 0 0 1 19 14a4 4 0 0 1-1.17 2.85L15.71 19l1.42 1.42l2.12-2.12a6 6 0 0 0-8.51-8.51l-8 8a6 6 0 0 0 0 8.51A6 6 0 0 0 7 28a6.07 6.07 0 0 0 4.28-1.76l-1.42-1.42a4 4 0 0 1-5.67 0z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->友情链接<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/about.html" class="link" aria-label="个人简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 8a5 5 0 1 0 5 5a5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z" fill="currentColor"></path><path d="M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm-6 24.377V25a3.003 3.003 0 0 1 3-3h6a3.003 3.003 0 0 1 3 3v1.377a11.899 11.899 0 0 1-12 0zm13.992-1.451A5.002 5.002 0 0 0 19 20h-6a5.002 5.002 0 0 0-4.992 4.926a12 12 0 1 1 15.985 0z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->个人简介<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="课程笔记"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 10h7v2h-7z" fill="currentColor"></path><path d="M19 15h7v2h-7z" fill="currentColor"></path><path d="M19 20h7v2h-7z" fill="currentColor"></path><path d="M28 5H4a2.002 2.002 0 0 0-2 2v18a2.002 2.002 0 0 0 2 2h24a2.003 2.003 0 0 0 2-2V7a2.002 2.002 0 0 0-2-2zM4 7h11v18H4zm13 18V7h11l.002 18z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->课程笔记<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="课程笔记"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M19 10h7v2h-7z" fill="currentColor"></path><path d="M19 15h7v2h-7z" fill="currentColor"></path><path d="M19 20h7v2h-7z" fill="currentColor"></path><path d="M28 5H4a2.002 2.002 0 0 0-2 2v18a2.002 2.002 0 0 0 2 2h24a2.003 2.003 0 0 0 2-2V7a2.002 2.002 0 0 0-2-2zM4 7h11v18H4zm13 18V7h11l.002 18z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->课程笔记<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/categories/数字系统设计基础/1.html" class="link" aria-label="数字系统设计基础"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->数字系统设计基础<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/CV/1.html" class="link" aria-label="CV"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CV<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/categories/OS/1.html" class="link" aria-label="OS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->OS<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="技术博客"><span class="xicon-container left title"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M4 24h10v2H4z" fill="currentColor"></path><path d="M4 18h10v2H4z" fill="currentColor"></path><path d="M26 14H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zM6 6v6h20V6z" fill="currentColor"></path><path d="M26 28h-6a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zm-6-8v6h6v-6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->技术博客<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="技术博客"><span class="title"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M4 24h10v2H4z" fill="currentColor"></path><path d="M4 18h10v2H4z" fill="currentColor"></path><path d="M26 14H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zM6 6v6h20V6z" fill="currentColor"></path><path d="M26 28h-6a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2zm-6-8v6h6v-6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->技术博客<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/categories/Linux/1.html" class="link" aria-label="Linux 学习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Linux 学习<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/friendship.html" class="link" aria-label="友情链接"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M29.25 6.76a6 6 0 0 0-8.5 0l1.42 1.42a4 4 0 1 1 5.67 5.67l-8 8a4 4 0 1 1-5.67-5.66l1.41-1.42l-1.41-1.42l-1.42 1.42a6 6 0 0 0 0 8.5A6 6 0 0 0 17 25a6 6 0 0 0 4.27-1.76l8-8a6 6 0 0 0-.02-8.48z" fill="currentColor"></path><path d="M4.19 24.82a4 4 0 0 1 0-5.67l8-8a4 4 0 0 1 5.67 0A3.94 3.94 0 0 1 19 14a4 4 0 0 1-1.17 2.85L15.71 19l1.42 1.42l2.12-2.12a6 6 0 0 0-8.51-8.51l-8 8a6 6 0 0 0 0 8.51A6 6 0 0 0 7 28a6.07 6.07 0 0 0 4.28-1.76l-1.42-1.42a4 4 0 0 1-5.67 0z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->友情链接<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/about.html" class="link" aria-label="个人简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 8a5 5 0 1 0 5 5a5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3a3.003 3.003 0 0 1-3 3z" fill="currentColor"></path><path d="M16 2a14 14 0 1 0 14 14A14.016 14.016 0 0 0 16 2zm-6 24.377V25a3.003 3.003 0 0 1 3-3h6a3.003 3.003 0 0 1 3 3v1.377a11.899 11.899 0 0 1-12 0zm13.992-1.451A5.002 5.002 0 0 0 19 20h-6a5.002 5.002 0 0 0-4.992 4.926a12 12 0 1 1 15.985 0z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->个人简介<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><!----><!--[--><main class="page-container"><aside class="series-container"><!--[--><!--]--></aside><div class="page-content"><h1 class="page-title">Lab 5：文件系统</h1><div class="page-info" data-v-8f93817e><span class="xicon-container left" data-v-8f93817e><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->byml<!--]--></span></span><span class="xicon-container left" data-v-8f93817e><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2025-06-05<!--]--></span></span><span class="xicon-container left" data-v-8f93817e><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[--><!--[--><a href="/categories/OS/1.html" class="page-info-link" data-v-8f93817e>OS</a><!--]--><!--]--></span></span><!----><!----></div><div class="theme-reco-md-content"><div><h2 id="lab-5-文件系统" tabindex="-1"><a class="header-anchor" href="#lab-5-文件系统"><span>Lab 5：文件系统</span></a></h2><blockquote><p>完结撒花，感谢陪伴 🌷</p></blockquote><h3 id="存储的抽象" tabindex="-1"><a class="header-anchor" href="#存储的抽象"><span>存储的抽象</span></a></h3><p>󱜸 我们日常使用的文件系统是一个多叉树状结构，那么它该以何种方式存储呢？ Ext 文件系统采用了类似“链表树”的方式存储文件关系：每一个文件名对应树上的一个节点，文件夹间的嵌套关系对应一条边。而数据则是以块的方式存储，每个文件名都会维护指向其数据块的指针。 󱜸 设备、程序、文件夹和普通文件有什么区别？ 在 Linux &quot;Every thing is a file&quot; 的设计理念下，用户只需要看到万物皆文件，而操作系统要考虑的事就很多了。虽然都是抽象成文件，实际处理时却需要根据其类型、权限等信息采用不同的处理逻辑。 󱜸 在存储设备中，文件系统以什么形式存在？</p><figure><img src="/assets/image-24-DirDD0IL.png" alt="" title="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>以一块使用 Ext2 文件系统的硬盘为例，在格式化后，整体结构如上。可以看到，磁盘的第一个分区是我们熟悉的主引导扇区，然后会被分为若干组。每组里面包括：</p><ul><li>一个超级块：用来记录 block 和 inode 的总量、已使用和未使用量、最后一次写入数据的时间、是否挂载等一系列基本信息。</li><li>一个组描述区：用来标记本组开始和结束的 block 号、每个区段（Super Blcok、bitmap等）分别的开始和结束 block 号</li><li>一个数据块使用标记：用来在创建块时快速找到未使用块号</li><li>一个节点使用标记：用来在创建节点时快速找到未使用节点号</li><li>若干节点表：表格的数量是在格式化时确定好的，每个节点占 128 位（16字节），包含节点修改时间、大小、指向的数据块等信息。记录每个块需要 4 位，就算使用了间接记录，单一节点能维护的数据块数量也是有限的，从而文件系统的单文件大小有上限。</li><li>若干数据块：数据块的数量和大小也是在格式化时确定好的，Ext2 支持 1K、2K 和 4K 三种大小，越大的 block 对应越大的单文件大小，最大支持 2TB 单文件，16TB 文件系统总大小。Ext4 则升级inode 到 256 位，使得其支持 16 TB 单文件和 1EB 文件系统总大小。</li></ul><p>󱜸 在 Ext 的文件系统下，文件夹是怎么维护的？如何知道一个文件夹里有哪些文件呢？ 首先，文件夹是特殊的文件，因此按照规则，其也是由一个 inode 存储的。而文件夹中的文件信息，则被维护在文件夹的数据块中，存储其 inode 和名称，这就构成了我们常见的树状结构。</p><h3 id="文件系统-api" tabindex="-1"><a class="header-anchor" href="#文件系统-api"><span>文件系统 API</span></a></h3><h4 id="内核控制" tabindex="-1"><a class="header-anchor" href="#内核控制"><span>内核控制</span></a></h4><p>文件是静态的数据，要想对数据进行操作，就需要操作系统将文件的数据加载到内存中，再进行一系列的读写操作。为此，操作系统向应用程序提供了“文件描述符”对文件进行操作。 文件描述符对应着 FCB(File Control Block，文件控制块)。FCB 中维护有当前打开的所有文件的相关信息（打开方式、读写偏移量等）。所有对文件的读写，都有如下流程：</p><ul><li>程序发起 <code>open</code> 系统调用，请求打开文件</li><li>操作系统根据文件路径，在文件系统中找到（或创建）相应的文件，创建 FCB，返回其索引作为文件描述符</li><li>程序获取文件描述符，发起 <code>read</code>、<code>write</code>、<code>lseek</code> 等系统调用，对文件进行操作</li><li>操作系统根据文件描述符，找到对应的 FCB，并在文件系统中执行对应操作</li></ul><p>使用文件描述符，相比于用路径描述文件，更加方便处理（文件描述符只是一个索引数），也更加安全（文件打开过程中可能有其他操作使得路径发生改变）。</p><h4 id="并发冲突" tabindex="-1"><a class="header-anchor" href="#并发冲突"><span>并发冲突</span></a></h4><p>󱜸 不同进程如果请求对相同文件的操作，会不会出现冲突？ 操作系统需要处理这种冲突，一般会维护全局的 FCB 引用计数，这样就可以知道文件是否处于编辑状态，从而避免读写冲突；也可以及时关闭没有用的文件。 󱜸 子进程可以继承父进程打开的文件吗？ 对于 <code>fork</code> 系统调用，需要对父进程的 FCB 进行浅拷贝，同时让全局 FCB 对应文件的引用计数加一，这样就可以做到父子进程间偏移量的共享。 对于 <code>exec</code> 系统调用，可以直接将进程的 FCB 保留，全局 FCB 也无需修改，因为这时程序运行等价于在 <code>exec</code> 下面直接执行另一个程序，原来打开的文件没有关上，全局引用计数也不变。</p><div class="callout" data-callout="example"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"></line><line x1="8" x2="21" y1="12" y2="12"></line><line x1="8" x2="21" y1="18" y2="18"></line><line x1="3" x2="3.01" y1="6" y2="6"></line><line x1="3" x2="3.01" y1="12" y2="12"></line><line x1="3" x2="3.01" y1="18" y2="18"></line></svg></div><div class="callout-title-inner">重定向的实现</div></div><div class="callout-content"><p></p><div class="language-c line-numbers-mode" data-highlighter="prismjs" data-ext="c" data-title="c"><pre class="language-c"><code><span class="line"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>pid <span class="token operator">=</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// child</span></span>
<span class="line">	<span class="token function">close</span><span class="token punctuation">(</span>STDOUT_FILENO<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">	<span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;ls&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token comment">// father</span></span>
<span class="line">	<span class="token function">waitpid</span><span class="token punctuation">(</span>pid<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在子进程中，先关闭 <code>STDOUT_FILENO</code>，然后调用 <code>open</code>，此时，操作系统会将<strong>最小的未被占用文件描述符</strong>分配给 <code>a.txt</code>，恰好为 <code>STDOUT_FILENO</code>（标准输入输出的文件描述符是 <code>0</code> 和 <code>1</code>）。执行 <code>exec</code> 后，由于 <code>ls</code> 默认是向标准输出对应的描述符写入数据，这就实现了重定向。</p></div></div></div></div><footer class="page-meta"><!----><!----></footer><nav class="page-nav"><p class="hasPrev inner"><span class="page-nav-item prev"> ← Lab 4：并发控制</span><!----></p></nav><!----></div><div class="page-catalog-container"><h5 class="tip">目录</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/OS/Lab%205%EF%BC%9A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html#lab-5-文件系统" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Lab 5：文件系统"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Lab 5：文件系统<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/OS/Lab%205%EF%BC%9A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html#存储的抽象" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="存储的抽象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->存储的抽象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/OS/Lab%205%EF%BC%9A%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F.html#文件系统-api" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="文件系统 API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文件系统 API<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></main><!--]--></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-CqvpY_gu.js" defer></script>
  </body>
</html>
